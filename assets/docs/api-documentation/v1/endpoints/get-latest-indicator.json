{
  "lastReviewedOn": "05 Dec 2024",
    "content":"<h1>Get Latest Indicator</h1>   <p><mark><b>GET</b> &rarr; /v1/trading_pairs/{trading_pair}/latest_indicator/{request_timestamp_seconds}</mark></p>   <p>Retrieve historical trading indicators for a given trading pair and timeframe. The endpoint searches for the most recent indicator in the 12 hours prior to the specified timestamp.</p>   <p><strong>API credit cost:</strong><br><i>(please refer to the <a href=\"#/docs/api-documentation/v1/overview\">Overview</a> page).</i></p><strong>Signing string template:</strong><br>  <pre class=\"centre\"><code>string_to_sign = f\"{trading_pair}{request_timestamp_seconds}{current_unix_timestamp_seconds}{application_id}\"</code></pre>  <h2>Path Parameters</h2><p>The following path parameters form part of the endpoint URL string:</p>     <ul><li><strong>trading_pair:</strong> The trading pair for which you want to request the latest indicator. Ensure the currencies are seperated by a underscore and not a forward slash e.g. 'BTC_USD'.</li> <li><strong>request_timestamp_seconds:</strong> The Unix formatted timestamp in seconds from where the search should start. The newest indicator in the 12 hours preceding this timestamp will be returned if any is found.</li> </ul> <h2>Headers</h2><p>The following headers need to be included in your request:</p>     <ul><li><strong>X-Signature:</strong> The <a href=\"#/docs/api-documentation/v1/generating-signature\">signature generated</a> using the signing string template provided above.</li>        <li><strong>X-Signature-Timestamp:</strong> The current Unix timestamp in seconds.</li>       <li><strong>Application-Id:</strong> Your unique application ID. <a href=\"#/docs/api-documentation/v1/getting-started\">(Where do I get this?)</a></li>  </ul><h2>Response</h2><p>The API will return a JSON response that includes a 'success' flag, 'msg', 'msgType', and 'records'. If the 'success' flag is false, the HTTP status code along with the message will provide suitable feedback. Ensure that the path parameters are valid.</p><h3>Example Response</h3>A typical successful response will look as follows: <pre class=\"centre\"><code>{\n  \"success\": true,\n  \"msg\": \"Indicator found.\",\n  \"msgType\": \"Success\",\n  \"records\": [\n    {\n      \"trading_pair\": \"SOL/USD\",\n      \"indicator\": {\n        \"trading_type\": \"Long\",\n        \"leverage\": 1,\n        \"buy_price\": 236.9,\n        \"sell_price\": 238.951,\n        \"buy_date\": \"2024-12-05T06:00:00\",\n        \"sell_prediction_date\": \"2024-12-05T18:00:00\",\n        \"risk\": 9,\n        \"market_direction\": \"Bull\",\n        \"percentage_change\": 0.8657694,\n        \"stoploss\": 1,\n        \"trading_type_24h\": null,\n        \"percentage_change_24h\": 1.1441707611083984,\n        \"risk_24h\": 8,\n        \"leverage_24h\": 1,\n        \"stoploss_24h\": 1\n      }\n    }\n  ]\n}</code></pre><h2>Example Code</h2><p>Below is a sample Python script for making a request to this endpoint. It uses version 1.5.0 of the <a href='https://pynacl.readthedocs.io/en/1.0.1/signing/'>PyNaCl library</a> and version 2.31.0 of the <a href='https://requests.readthedocs.io/en/latest/'>Requests library</a>.</p><pre><code class=\"python\">from datetime import datetime, timezone\nfrom nacl.encoding import HexEncoder\nfrom nacl.signing import SigningKey\nimport requests\n\n# Declare your signing key and application ID - replace these values with your own\nSIGNING_KEY = \"6163210a5115853f6fdfe7bf7bb1d26c8652f343fe3a3c072b2b706f0d1b9c56\"\nAPPLICATION_ID = \"e91523761f929ed7d1ea2f830fe2aec9\"\n\n# API base URL\nBASE_URL = \"https://api.raker.market\"\n\n# Trading pair and the Unix timestamp for the request - replace these values with your own\ntrading_pair: str = \"BTC_USD\"\nrequest_timestamp_seconds: int = 1732276998\n\n# Constructing the request URL\nrequest_url: str = (\n    f\"{BASE_URL}/v1/trading_pairs/{trading_pair}/latest_indicator/{request_timestamp_seconds}\"\n)\n\n# Current Unix timestamp\ncurrent_unix_timestamp_seconds: int = int(datetime.now(timezone.utc).timestamp())\n\n# Concatenating the string to be signed\nstring_to_sign: str = (\n    f\"{trading_pair}{request_timestamp_seconds}{current_unix_timestamp_seconds}{APPLICATION_ID}\"\n)\n\n# Sign the string using the signing key\nsigning_key = SigningKey(SIGNING_KEY, encoder=HexEncoder)\nsignature: str = signing_key.sign(\n    string_to_sign.encode(), encoder=HexEncoder\n).signature.decode()\n\n# Preparing request headers\nrequest_headers = {\n    \"X-Signature\": signature,\n    \"X-Signature-Timestamp\": str(current_unix_timestamp_seconds),\n    \"X-Application-Id\": APPLICATION_ID,\n}\n\n# Making a GET request to the API endpoint\nresponse = requests.get(url=request_url, headers=request_headers)\n\n# Parsing the response to JSON\nresponse_json = response.json()\n\n# Print the full response for debugging\nprint(f\"Full response: {response_json}\")\n\n# Extracting response data\nMSG_TYPES = [\"Success\", \"Error\", \"Warning\", \"Notice\"]\n\nresponse_success: bool = response_json[\"success\"]\nresponse_msg: str = response_json[\"msg\"]\nresponse_msgType: str = response_json[\"msgType\"]\nresponse_records: list[dict] = response_json[\"records\"]\n\n# Handling the response\nif response_success and response_records:\n    # Printing the requested indicator for the trading pair\n    record =  response_records[0]\n    print(f\"Trading Pair: {record['trading_pair']}\")\n    print(f\"Generated Indicator: {record['indicator']}\")\nelse:\n    print(f\"Response Message: {response_msg}\")</code></pre>",
  "i18n_content": "docs_nav_tree.api_documentation.v1.endpoints.get-latest-indicator.content"
}
